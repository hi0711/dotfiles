<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>debugging_rails_applications - rails-4.1.8 Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Debugging+Rails+Applications">Debugging Rails Applications</a>
    <li><a href="#label-View+Helpers+for+Debugging">View Helpers for Debugging</a>
    <li><a href="#label-debug"><code>debug</code></a>
    <li><a href="#label-to_yaml"><code>to_yaml</code></a>
    <li><a href="#label-inspect"><code>inspect</code></a>
    <li><a href="#label-The+Logger">The Logger</a>
    <li><a href="#label-What+is+the+Logger%3F">What is the Logger?</a>
    <li><a href="#label-Log+Levels">Log Levels</a>
    <li><a href="#label-Sending+Messages">Sending Messages</a>
    <li><a href="#label-Tagged+Logging">Tagged Logging</a>
    <li><a href="#label-Impact+of+Logs+on+Performance">Impact of Logs on Performance</a>
    <li><a href="#label-Debugging+with+the+debugger+gem">Debugging with the <code>debugger</code> gem</a>
    <li><a href="#label-Setup">Setup</a>
    <li><a href="#label-The+Shell">The Shell</a>
    <li><a href="#label-The+Context">The Context</a>
    <li><a href="#label-Threads">Threads</a>
    <li><a href="#label-Inspecting+Variables">Inspecting Variables</a>
    <li><a href="#label-Step+by+Step">Step by Step</a>
    <li><a href="#label-Breakpoints">Breakpoints</a>
    <li><a href="#label-Catching+Exceptions">Catching Exceptions</a>
    <li><a href="#label-Resuming+Execution">Resuming Execution</a>
    <li><a href="#label-Editing">Editing</a>
    <li><a href="#label-Quitting">Quitting</a>
    <li><a href="#label-Settings">Settings</a>
    <li><a href="#label-Debugging+Memory+Leaks">Debugging Memory Leaks</a>
    <li><a href="#label-Valgrind">Valgrind</a>
    <li><a href="#label-Plugins+for+Debugging">Plugins for Debugging</a>
    <li><a href="#label-References">References</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../guides/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../guides/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/assets/images/icons/README.html">README</a>
  
    <li><a href="../../guides/assets/javascripts/guides_js.html">guides.js</a>
  
    <li><a href="../../guides/assets/javascripts/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../guides/assets/javascripts/responsive-tables_js.html">responsive-tables.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAS3_js.html">shBrushAS3.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushAppleScript_js.html">shBrushAppleScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushBash_js.html">shBrushBash.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCSharp_js.html">shBrushCSharp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushColdFusion_js.html">shBrushColdFusion.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCpp_js.html">shBrushCpp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushCss_js.html">shBrushCss.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDelphi_js.html">shBrushDelphi.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushDiff_js.html">shBrushDiff.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushErlang_js.html">shBrushErlang.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushGroovy_js.html">shBrushGroovy.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJScript_js.html">shBrushJScript.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJava_js.html">shBrushJava.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushJavaFX_js.html">shBrushJavaFX.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPerl_js.html">shBrushPerl.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPhp_js.html">shBrushPhp.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPlain_js.html">shBrushPlain.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPowerShell_js.html">shBrushPowerShell.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushPython_js.html">shBrushPython.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushRuby_js.html">shBrushRuby.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSass_js.html">shBrushSass.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushScala_js.html">shBrushScala.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushSql_js.html">shBrushSql.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushVb_js.html">shBrushVb.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shBrushXml_js.html">shBrushXml.js</a>
  
    <li><a href="../../guides/assets/javascripts/syntaxhighlighter/shCore_js.html">shCore.js</a>
  
    <li><a href="../../guides/assets/stylesheets/fixes_css.html">fixes.css</a>
  
    <li><a href="../../guides/assets/stylesheets/kindle_css.html">kindle.css</a>
  
    <li><a href="../../guides/assets/stylesheets/main_css.html">main.css</a>
  
    <li><a href="../../guides/assets/stylesheets/print_css.html">print.css</a>
  
    <li><a href="../../guides/assets/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="../../guides/assets/stylesheets/responsive-tables_css.html">responsive-tables.css</a>
  
    <li><a href="../../guides/assets/stylesheets/style_css.html">style.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCore_css.html">shCore.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDefault_css.html">shCoreDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreDjango_css.html">shCoreDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEclipse_css.html">shCoreEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreEmacs_css.html">shCoreEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreFadeToGrey_css.html">shCoreFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMDUltra_css.html">shCoreMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreMidnight_css.html">shCoreMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shCoreRDark_css.html">shCoreRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDefault_css.html">shThemeDefault.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeDjango_css.html">shThemeDjango.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEclipse_css.html">shThemeEclipse.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeEmacs_css.html">shThemeEmacs.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeFadeToGrey_css.html">shThemeFadeToGrey.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMDUltra_css.html">shThemeMDUltra.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeMidnight_css.html">shThemeMidnight.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRDark_css.html">shThemeRDark.css</a>
  
    <li><a href="../../guides/assets/stylesheets/syntaxhighlighter/shThemeRailsGuides_css.html">shThemeRailsGuides.css</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile.html">Gemfile</a>
  
    <li><a href="../../guides/code/getting_started/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../guides/code/getting_started/README_rdoc.html">README</a>
  
    <li><a href="../../guides/code/getting_started/Rakefile.html">Rakefile</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/comments_js_coffee.html">comments.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/posts_js_coffee.html">posts.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/javascripts/welcome_js_coffee.html">welcome.js.coffee</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/comments_css_scss.html">comments.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/posts_css_scss.html">posts.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/app/assets/stylesheets/welcome_css_scss.html">welcome.css.scss</a>
  
    <li><a href="../../guides/code/getting_started/config_ru.html">config.ru</a>
  
    <li><a href="../../guides/code/getting_started/public/404_html.html">404.html</a>
  
    <li><a href="../../guides/code/getting_started/public/422_html.html">422.html</a>
  
    <li><a href="../../guides/code/getting_started/public/500_html.html">500.html</a>
  
    <li><a href="../../guides/code/getting_started/public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../guides/code/getting_started/public/robots_txt.html">robots</a>
  
    <li><a href="../../guides/source/2_2_release_notes_md.html">2_2_release_notes</a>
  
    <li><a href="../../guides/source/2_3_release_notes_md.html">2_3_release_notes</a>
  
    <li><a href="../../guides/source/3_0_release_notes_md.html">3_0_release_notes</a>
  
    <li><a href="../../guides/source/3_1_release_notes_md.html">3_1_release_notes</a>
  
    <li><a href="../../guides/source/3_2_release_notes_md.html">3_2_release_notes</a>
  
    <li><a href="../../guides/source/4_0_release_notes_md.html">4_0_release_notes</a>
  
    <li><a href="../../guides/source/4_1_release_notes_md.html">4_1_release_notes</a>
  
    <li><a href="../../guides/source/action_controller_overview_md.html">action_controller_overview</a>
  
    <li><a href="../../guides/source/action_mailer_basics_md.html">action_mailer_basics</a>
  
    <li><a href="../../guides/source/action_view_overview_md.html">action_view_overview</a>
  
    <li><a href="../../guides/source/active_model_basics_md.html">active_model_basics</a>
  
    <li><a href="../../guides/source/active_record_basics_md.html">active_record_basics</a>
  
    <li><a href="../../guides/source/active_record_callbacks_md.html">active_record_callbacks</a>
  
    <li><a href="../../guides/source/active_record_querying_md.html">active_record_querying</a>
  
    <li><a href="../../guides/source/active_record_validations_md.html">active_record_validations</a>
  
    <li><a href="../../guides/source/active_support_core_extensions_md.html">active_support_core_extensions</a>
  
    <li><a href="../../guides/source/active_support_instrumentation_md.html">active_support_instrumentation</a>
  
    <li><a href="../../guides/source/api_documentation_guidelines_md.html">api_documentation_guidelines</a>
  
    <li><a href="../../guides/source/asset_pipeline_md.html">asset_pipeline</a>
  
    <li><a href="../../guides/source/association_basics_md.html">association_basics</a>
  
    <li><a href="../../guides/source/caching_with_rails_md.html">caching_with_rails</a>
  
    <li><a href="../../guides/source/command_line_md.html">command_line</a>
  
    <li><a href="../../guides/source/configuring_md.html">configuring</a>
  
    <li><a href="../../guides/source/contributing_to_ruby_on_rails_md.html">contributing_to_ruby_on_rails</a>
  
    <li><a href="../../guides/source/debugging_rails_applications_md.html">debugging_rails_applications</a>
  
    <li><a href="../../guides/source/development_dependencies_install_md.html">development_dependencies_install</a>
  
    <li><a href="../../guides/source/documents_yaml.html">documents.yaml</a>
  
    <li><a href="../../guides/source/engines_md.html">engines</a>
  
    <li><a href="../../guides/source/form_helpers_md.html">form_helpers</a>
  
    <li><a href="../../guides/source/generators_md.html">generators</a>
  
    <li><a href="../../guides/source/getting_started_md.html">getting_started</a>
  
    <li><a href="../../guides/source/i18n_md.html">i18n</a>
  
    <li><a href="../../guides/source/initialization_md.html">initialization</a>
  
    <li><a href="../../guides/source/layouts_and_rendering_md.html">layouts_and_rendering</a>
  
    <li><a href="../../guides/source/maintenance_policy_md.html">maintenance_policy</a>
  
    <li><a href="../../guides/source/migrations_md.html">migrations</a>
  
    <li><a href="../../guides/source/nested_model_forms_md.html">nested_model_forms</a>
  
    <li><a href="../../guides/source/plugins_md.html">plugins</a>
  
    <li><a href="../../guides/source/rails_application_templates_md.html">rails_application_templates</a>
  
    <li><a href="../../guides/source/rails_on_rack_md.html">rails_on_rack</a>
  
    <li><a href="../../guides/source/routing_md.html">routing</a>
  
    <li><a href="../../guides/source/ruby_on_rails_guides_guidelines_md.html">ruby_on_rails_guides_guidelines</a>
  
    <li><a href="../../guides/source/security_md.html">security</a>
  
    <li><a href="../../guides/source/testing_md.html">testing</a>
  
    <li><a href="../../guides/source/upgrading_ruby_on_rails_md.html">upgrading_ruby_on_rails</a>
  
    <li><a href="../../guides/source/working_with_javascript_in_rails_md.html">working_with_javascript_in_rails</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page guides/source/debugging_rails_applications.md">

<h1 id="label-Debugging+Rails+Applications">Debugging Rails Applications<span><a href="#label-Debugging+Rails+Applications">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<p>This guide introduces techniques for debugging Ruby on Rails applications.</p>

<p>After reading this guide, you will know:</p>
<ul><li>
<p>The purpose of debugging.</p>
</li><li>
<p>How to track down problems and issues in your application that your tests
aren&#39;t identifying.</p>
</li><li>
<p>The different ways of debugging.</p>
</li><li>
<p>How to analyze the stack trace.</p>
</li></ul>
<hr>

<h2 id="label-View+Helpers+for+Debugging">View Helpers for Debugging<span><a href="#label-View+Helpers+for+Debugging">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>One common task is to inspect the contents of a variable. In Rails, you can
do this with three methods:</p>
<ul><li>
<p><code>debug</code></p>
</li><li>
<p><code>to_yaml</code></p>
</li><li>
<p><code>inspect</code></p>
</li></ul>

<h3 id="label-debug"><code>debug</code><span><a href="#label-debug">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The <code>debug</code> helper will return a &lt;pre&gt; tag that renders
the object using the YAML format. This will generate human-readable data
from any object. For example, if you have this code in a view:</p>

<pre>&lt;%= debug @post %&gt;
&lt;p&gt;
  &lt;b&gt;Title:&lt;/b&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;</pre>

<p>You&#39;ll see something like this:</p>

<pre>--- !ruby/object:Post
attributes:
  updated_at: 2008-09-05 22:55:47
  body: It&#39;s a very helpful guide for debugging your Rails app.
  title: Rails debugging guide
  published: t
  id: &quot;1&quot;
  created_at: 2008-09-05 22:55:47
attributes_cache: {}


Title: Rails debugging guide</pre>

<h3 id="label-to_yaml"><code>to_yaml</code><span><a href="#label-to_yaml">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Displaying an instance variable, or any other object or method, in YAML
format can be achieved this way:</p>

<pre>&lt;%= simple_format @post.to_yaml %&gt;
&lt;p&gt;
  &lt;b&gt;Title:&lt;/b&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;</pre>

<p>The <code>to_yaml</code> method converts the method to YAML format leaving
it more readable, and then the <code>simple_format</code> helper is used to
render each line as in the console. This is how <code>debug</code> method
does its magic.</p>

<p>As a result of this, you will have something like this in your view:</p>

<pre>--- !ruby/object:Post
attributes:
updated_at: 2008-09-05 22:55:47
body: It&#39;s a very helpful guide for debugging your Rails app.
title: Rails debugging guide
published: t
id: &quot;1&quot;
created_at: 2008-09-05 22:55:47
attributes_cache: {}

Title: Rails debugging guide</pre>

<h3 id="label-inspect"><code>inspect</code><span><a href="#label-inspect">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Another useful method for displaying object values is <code>inspect</code>,
especially when working with arrays or hashes. This will print the object
value as a string. For example:</p>

<pre>&lt;%= [1, 2, 3, 4, 5].inspect %&gt;
&lt;p&gt;
  &lt;b&gt;Title:&lt;/b&gt;
  &lt;%= @post.title %&gt;
&lt;/p&gt;</pre>

<p>Will be rendered as follows:</p>

<pre>[1, 2, 3, 4, 5]

Title: Rails debugging guide</pre>

<h2 id="label-The+Logger">The Logger<span><a href="#label-The+Logger">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>It can also be useful to save information to log files at runtime. Rails
maintains a separate log file for each runtime environment.</p>

<h3 id="label-What+is+the+Logger%3F">What is the Logger?<span><a href="#label-What+is+the+Logger%3F">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Rails makes use of the <code>ActiveSupport::Logger</code> class to write
log information. You can also substitute another logger such as
<code>Log4r</code> if you wish.</p>

<p>You can specify an alternative logger in your <code>environment.rb</code>
or any environment file:</p>

<pre class="ruby"><span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">STDOUT</span>)
<span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Log4r</span><span class="ruby-operator">::</span><span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Application Log&quot;</span>)
</pre>

<p>Or in the <code>Initializer</code> section, add <em>any</em> of the
following</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">STDOUT</span>)
<span class="ruby-identifier">config</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Log4r</span><span class="ruby-operator">::</span><span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Application Log&quot;</span>)
</pre>

<p>TIP: By default, each log is created under <code>Rails.root/log/</code> and
the log file name is <code>environment_name.log</code>.</p>

<h3 id="label-Log+Levels">Log Levels<span><a href="#label-Log+Levels">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>When something is logged it&#39;s printed into the corresponding log if the
log level of the message is equal or higher than the configured log level.
If you want to know the current log level you can call the
<code>Rails.logger.level</code> method.</p>

<p>The available log levels are: <code>:debug</code>, <code>:info</code>,
<code>:warn</code>, <code>:error</code>, <code>:fatal</code>, and
<code>:unknown</code>, corresponding to the log level numbers from 0 up to
5 respectively. To change the default log level, use</p>

<pre class="ruby"><span class="ruby-identifier">config</span>.<span class="ruby-identifier">log_level</span> = :<span class="ruby-identifier">warn</span> <span class="ruby-comment"># In any environment initializer, or</span>
<span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-value">0</span> <span class="ruby-comment"># at any time</span>
</pre>

<p>This is useful when you want to log under development or staging, but you
don&#39;t want to flood your production log with unnecessary information.</p>

<p>TIP: The default Rails log level is <code>info</code> in production mode
and <code>debug</code> in development and test mode.</p>

<h3 id="label-Sending+Messages">Sending Messages<span><a href="#label-Sending+Messages">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>To write in the current log use the
<code>logger.(debug|info|warn|error|fatal)</code> method from within a
controller, model or mailer:</p>

<pre class="ruby"><span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Person attributes hash: #{@person.attributes.inspect}&quot;</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;Processing the request...&quot;</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">fatal</span> <span class="ruby-string">&quot;Terminating application, raised unrecoverable error!!!&quot;</span>
</pre>

<p>Here&#39;s an example of a method instrumented with extra logging:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">PostsController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
  <span class="ruby-comment"># ...</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>
    <span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">post</span>])
    <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;New post: #{@post.attributes.inspect}&quot;</span>
    <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Post should be valid: #{@post.valid?}&quot;</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@post</span>.<span class="ruby-identifier">save</span>
      <span class="ruby-identifier">flash</span>[:<span class="ruby-identifier">notice</span>] = <span class="ruby-string">&#39;Post was successfully created.&#39;</span>
      <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-string">&quot;The post was saved and now the user is going to be redirected...&quot;</span>
      <span class="ruby-identifier">redirect_to</span>(<span class="ruby-ivar">@post</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">render</span> <span class="ruby-identifier">action</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;new&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Here&#39;s an example of the log generated when this controller action is
executed:</p>

<pre class="ruby"><span class="ruby-constant">Processing</span> <span class="ruby-constant">PostsController</span><span class="ruby-comment">#create (for 127.0.0.1 at 2008-09-08 11:52:54) [POST]</span>
  <span class="ruby-constant">Session</span> <span class="ruby-constant">ID</span><span class="ruby-operator">:</span> <span class="ruby-constant">BAh7BzoMY3NyZl9pZCIlMDY5MWU1M2I1ZDRjODBlMzkyMWI1OTg2NWQyNzViZjYiCmZsYXNoSUM6J0FjdGl</span>
<span class="ruby-identifier">vbkNvbnRyb2xsZXI6OkZsYXNoOjpGbGFzaEhhc2h7AAY6CkB1c2VkewA</span>=<span class="ruby-operator">-</span><span class="ruby-operator">-</span><span class="ruby-identifier">b18cd92fba90eacf8137e5f6b3b06c4d724596a4</span>
  <span class="ruby-constant">Parameters</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;commit&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;Create&quot;</span>, <span class="ruby-string">&quot;post&quot;</span>=<span class="ruby-operator">&gt;</span>{<span class="ruby-string">&quot;title&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;Debugging Rails&quot;</span>,
 <span class="ruby-string">&quot;body&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;I&#39;m learning how to print in logs!!!&quot;</span>, <span class="ruby-string">&quot;published&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;0&quot;</span>},
 <span class="ruby-string">&quot;authenticity_token&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;2059c1286e93402e389127b1153204e0d1e275dd&quot;</span>, <span class="ruby-string">&quot;action&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;create&quot;</span>, <span class="ruby-string">&quot;controller&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;posts&quot;</span>}
<span class="ruby-constant">New</span> <span class="ruby-identifier">post</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;updated_at&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>, <span class="ruby-string">&quot;title&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;Debugging Rails&quot;</span>, <span class="ruby-string">&quot;body&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;I&#39;m learning how to print in logs!!!&quot;</span>,
 <span class="ruby-string">&quot;published&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">false</span>, <span class="ruby-string">&quot;created_at&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>}
<span class="ruby-constant">Post</span> <span class="ruby-identifier">should</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">valid</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
  <span class="ruby-constant">Post</span> <span class="ruby-constant">Create</span> (<span class="ruby-value">0.000443</span>)   <span class="ruby-constant">INSERT</span> <span class="ruby-constant">INTO</span> <span class="ruby-string">&quot;posts&quot;</span> (<span class="ruby-string">&quot;updated_at&quot;</span>, <span class="ruby-string">&quot;title&quot;</span>, <span class="ruby-string">&quot;body&quot;</span>, <span class="ruby-string">&quot;published&quot;</span>,
 <span class="ruby-string">&quot;created_at&quot;</span>) <span class="ruby-constant">VALUES</span>(<span class="ruby-string">&#39;2008-09-08 14:52:54&#39;</span>, <span class="ruby-string">&#39;Debugging Rails&#39;</span>,
 <span class="ruby-string">&#39;I&#39;</span><span class="ruby-string">&#39;m learning how to print in logs!!!&#39;</span>, <span class="ruby-string">&#39;f&#39;</span>, <span class="ruby-string">&#39;2008-09-08 14:52:54&#39;</span>)
<span class="ruby-constant">The</span> <span class="ruby-identifier">post</span> <span class="ruby-identifier">was</span> <span class="ruby-identifier">saved</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">now</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">user</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">going</span> <span class="ruby-identifier">to</span> <span class="ruby-identifier">be</span> <span class="ruby-identifier">redirected</span><span class="ruby-operator">...</span>
<span class="ruby-constant">Redirected</span> <span class="ruby-identifier">to</span> <span class="ruby-comment">#&lt;Post:0x20af760&gt;</span>
<span class="ruby-constant">Completed</span> <span class="ruby-keyword">in</span> <span class="ruby-value">0.01224</span> (<span class="ruby-value">81</span> <span class="ruby-identifier">reqs</span><span class="ruby-operator">/</span><span class="ruby-identifier">sec</span>) <span class="ruby-operator">|</span> <span class="ruby-constant">DB</span><span class="ruby-operator">:</span> <span class="ruby-value">0.00044</span> (<span class="ruby-value">3</span><span class="ruby-operator">%</span>) <span class="ruby-operator">|</span> <span class="ruby-value">302</span> <span class="ruby-constant">Found</span> [<span class="ruby-identifier">http</span>:<span class="ruby-operator">/</span><span class="ruby-regexp">/localhost/</span><span class="ruby-identifier">posts</span>]
</pre>

<p>Adding extra logging like this makes it easy to search for unexpected or
unusual behavior in your logs. If you add extra logging, be sure to make
sensible use of log levels to avoid filling your production logs with
useless trivia.</p>

<h3 id="label-Tagged+Logging">Tagged Logging<span><a href="#label-Tagged+Logging">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>When running multi-user, multi-account applications, it&#39;s often useful
to be able to filter the logs using some custom rules.
<code>TaggedLogging</code> in Active Support helps in doing exactly that by
stamping log lines with subdomains, request ids, and anything else to aid
debugging such applications.</p>

<pre class="ruby"><span class="ruby-identifier">logger</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TaggedLogging</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">STDOUT</span>))
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">tagged</span>(<span class="ruby-string">&quot;BCX&quot;</span>) { <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;Stuff&quot;</span> }                            <span class="ruby-comment"># Logs &quot;[BCX] Stuff&quot;</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">tagged</span>(<span class="ruby-string">&quot;BCX&quot;</span>, <span class="ruby-string">&quot;Jason&quot;</span>) { <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;Stuff&quot;</span> }                   <span class="ruby-comment"># Logs &quot;[BCX] [Jason] Stuff&quot;</span>
<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">tagged</span>(<span class="ruby-string">&quot;BCX&quot;</span>) { <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">tagged</span>(<span class="ruby-string">&quot;Jason&quot;</span>) { <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;Stuff&quot;</span> } } <span class="ruby-comment"># Logs &quot;[BCX] [Jason] Stuff&quot;</span>
</pre>

<h3 id="label-Impact+of+Logs+on+Performance">Impact of Logs on Performance<span><a href="#label-Impact+of+Logs+on+Performance">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Logging will always have a small impact on performance of your rails app, 
particularly when logging to disk.However, there are a few subtleties:</p>

<p>Using the <code>:debug</code> level will have a greater performance penalty
than <code>:fatal</code>,  as a far greater number of strings are being
evaluated and written to the  log output (e.g. disk).</p>

<p>Another potential pitfall is that if you have many calls to
<code>Logger</code> like this  in your code:</p>

<pre class="ruby"><span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Person attributes hash: #{@person.attributes.inspect}&quot;</span>
</pre>

<p>In the above example, There will be a performance impact even if the
allowed output level doesn&#39;t include debug. The reason is that Ruby has
to evaluate these strings, which includes instantiating the somewhat heavy
<code>String</code> object and interpolating the variables, and which takes
time. Therefore, it&#39;s recommended to pass blocks to the logger methods,
as these are only evaluated if the output level is the same or included in
the allowed level (i.e. lazy loading). The same code rewritten would be:</p>

<pre class="ruby"><span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> {<span class="ruby-node">&quot;Person attributes hash: #{@person.attributes.inspect}&quot;</span>}
</pre>

<p>The contents of the block, and therefore the string interpolation, is only
evaluated if debug is enabled. This performance savings is only really
noticeable with large amounts of logging, but it&#39;s a good practice to
employ.</p>

<h2 id="label-Debugging+with+the+debugger+gem">Debugging with the <code>debugger</code> gem<span><a href="#label-Debugging+with+the+debugger+gem">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>When your code is behaving in unexpected ways, you can try printing to logs
or the console to diagnose the problem. Unfortunately, there are times when
this sort of error tracking is not effective in finding the root cause of a
problem. When you actually need to journey into your running source code,
the debugger is your best companion.</p>

<p>The debugger can also help you if you want to learn about the Rails source
code but don&#39;t know where to start. Just debug any request to your
application and use this guide to learn how to move from the code you have
written deeper into Rails code.</p>

<h3 id="label-Setup">Setup<span><a href="#label-Setup">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>You can use the <code>debugger</code> gem to set breakpoints and step
through live code in Rails. To install it, just run:</p>

<pre>$ gem install debugger</pre>

<p>Rails has had built-in support for debugging since Rails 2.0. Inside any
Rails application you can invoke the debugger by calling the
<code>debugger</code> method.</p>

<p>Here&#39;s an example:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">PeopleController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">new</span>
    <span class="ruby-identifier">debugger</span>
    <span class="ruby-ivar">@person</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>If you see this message in the console or logs:</p>

<pre>***** Debugger requested, but was not available: Start server with --debugger to enable *****</pre>

<p>Make sure you have started your web server with the option
<code>--debugger</code>:</p>

<pre class="ruby">$ <span class="ruby-identifier">rails</span> <span class="ruby-identifier">server</span> <span class="ruby-operator">-</span><span class="ruby-operator">-</span><span class="ruby-identifier">debugger</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Booting</span> <span class="ruby-constant">WEBrick</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Rails</span> <span class="ruby-value">4.1</span><span class="ruby-value">.4</span> <span class="ruby-identifier">application</span> <span class="ruby-identifier">starting</span> <span class="ruby-identifier">on</span> <span class="ruby-identifier">http</span><span class="ruby-operator">:</span><span class="ruby-regexp">//</span><span class="ruby-value">0.0</span><span class="ruby-value">.0</span><span class="ruby-value">.0</span><span class="ruby-operator">:</span><span class="ruby-value">3000</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Debugger</span> <span class="ruby-identifier">enabled</span>
<span class="ruby-operator">...</span>
</pre>

<p>TIP: In development mode, you can dynamically <code>require
&#39;debugger&#39;</code> instead of restarting the server, even if it was
started without <code>--debugger</code>.</p>

<h3 id="label-The+Shell">The Shell<span><a href="#label-The+Shell">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>As soon as your application calls the <code>debugger</code> method, the
debugger will be started in a debugger shell inside the terminal window
where you launched your application server, and you will be placed at the
debugger&#39;s prompt <code>(rdb:n)</code>. The <em>n</em> is the thread
number. The prompt will also show you the next line of code that is waiting
to run.</p>

<p>If you got there by a browser request, the browser tab containing the
request will be hung until the debugger has finished and the trace has
finished processing the entire request.</p>

<p>For example:</p>

<pre>@posts = Post.all
(rdb:7)</pre>

<p>Now it&#39;s time to explore and dig into your application. A good place to
start is by asking the debugger for help. Type: <code>help</code></p>

<pre>(rdb:7) help
ruby-debug help v0.10.2
Type &#39;help &lt;command-name&gt;&#39; for help on a specific command

Available commands:
backtrace  delete   enable  help    next  quit     show    trace
break      disable  eval    info    p     reload   source  undisplay
catch      display  exit    irb     pp    restart  step    up
condition  down     finish  list    ps    save     thread  var
continue   edit     frame   method  putl  set      tmate   where</pre>

<p>TIP: To view the help menu for any command use <code>help
&lt;command-name&gt;</code> at the debugger prompt. For example:
<code><em>help var</em></code></p>

<p>The next command to learn is one of the most useful: <code>list</code>. You
can abbreviate any debugging command by supplying just enough letters to
distinguish them from other commands, so you can also use <code>l</code>
for the <code>list</code> command.</p>

<p>This command shows you where you are in the code by printing 10 lines
centered around the current line; the current line in this particular case
is line 6 and is marked by <code>=&gt;</code>.</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">7</span>) <span class="ruby-identifier">list</span>
[<span class="ruby-value">1</span>, <span class="ruby-value">10</span>] <span class="ruby-keyword">in</span> <span class="ruby-regexp">/PathTo/</span><span class="ruby-identifier">project</span><span class="ruby-operator">/</span><span class="ruby-identifier">app</span><span class="ruby-operator">/</span><span class="ruby-identifier">controllers</span><span class="ruby-operator">/</span><span class="ruby-identifier">posts_controller</span>.<span class="ruby-identifier">rb</span>
   <span class="ruby-value">1</span>  <span class="ruby-keyword">class</span> <span class="ruby-constant">PostsController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
   <span class="ruby-value">2</span>    <span class="ruby-comment"># GET /posts</span>
   <span class="ruby-value">3</span>    <span class="ruby-comment"># GET /posts.json</span>
   <span class="ruby-value">4</span>    <span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
   <span class="ruby-value">5</span>      <span class="ruby-identifier">debugger</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>      <span class="ruby-ivar">@posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>
   <span class="ruby-value">7</span>
   <span class="ruby-value">8</span>      <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
   <span class="ruby-value">9</span>        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment"># index.html.erb</span>
   <span class="ruby-value">10</span>        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">json</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@posts</span> }
</pre>

<p>If you repeat the <code>list</code> command, this time using just
<code>l</code>, the next ten lines of the file will be printed out.</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">7</span>) <span class="ruby-identifier">l</span>
[<span class="ruby-value">11</span>, <span class="ruby-value">20</span>] <span class="ruby-keyword">in</span> <span class="ruby-regexp">/PathTo/</span><span class="ruby-identifier">project</span><span class="ruby-operator">/</span><span class="ruby-identifier">app</span><span class="ruby-operator">/</span><span class="ruby-identifier">controllers</span><span class="ruby-operator">/</span><span class="ruby-identifier">posts_controller</span>.<span class="ruby-identifier">rb</span>
   <span class="ruby-value">11</span>      <span class="ruby-keyword">end</span>
   <span class="ruby-value">12</span>    <span class="ruby-keyword">end</span>
   <span class="ruby-value">13</span>
   <span class="ruby-value">14</span>    <span class="ruby-comment"># GET /posts/1</span>
   <span class="ruby-value">15</span>    <span class="ruby-comment"># GET /posts/1.json</span>
   <span class="ruby-value">16</span>    <span class="ruby-keyword">def</span> <span class="ruby-identifier">show</span>
   <span class="ruby-value">17</span>      <span class="ruby-ivar">@post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[:<span class="ruby-identifier">id</span>])
   <span class="ruby-value">18</span>
   <span class="ruby-value">19</span>      <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
   <span class="ruby-value">20</span>        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment"># show.html.erb</span>
</pre>

<p>And so on until the end of the current file. When the end of file is
reached, the <code>list</code> command will start again from the beginning
of the file and continue again up to the end, treating the file as a
circular buffer.</p>

<p>On the other hand, to see the previous ten lines you should type
<code>list-</code> (or <code>l-</code>)</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">7</span>) <span class="ruby-identifier">l</span><span class="ruby-operator">-</span>
[<span class="ruby-value">1</span>, <span class="ruby-value">10</span>] <span class="ruby-keyword">in</span> <span class="ruby-regexp">/PathTo/</span><span class="ruby-identifier">project</span><span class="ruby-operator">/</span><span class="ruby-identifier">app</span><span class="ruby-operator">/</span><span class="ruby-identifier">controllers</span><span class="ruby-operator">/</span><span class="ruby-identifier">posts_controller</span>.<span class="ruby-identifier">rb</span>
   <span class="ruby-value">1</span>  <span class="ruby-keyword">class</span> <span class="ruby-constant">PostsController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
   <span class="ruby-value">2</span>    <span class="ruby-comment"># GET /posts</span>
   <span class="ruby-value">3</span>    <span class="ruby-comment"># GET /posts.json</span>
   <span class="ruby-value">4</span>    <span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
   <span class="ruby-value">5</span>      <span class="ruby-identifier">debugger</span>
   <span class="ruby-value">6</span>      <span class="ruby-ivar">@posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>
   <span class="ruby-value">7</span>
   <span class="ruby-value">8</span>      <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
   <span class="ruby-value">9</span>        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment"># index.html.erb</span>
   <span class="ruby-value">10</span>        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">json</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@posts</span> }
</pre>

<p>This way you can move inside the file, being able to see the code above and
over the line you added the <code>debugger</code>. Finally, to see where
you are in the code again you can type <code>list=</code></p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">7</span>) <span class="ruby-identifier">list</span>=
[<span class="ruby-value">1</span>, <span class="ruby-value">10</span>] <span class="ruby-keyword">in</span> <span class="ruby-regexp">/PathTo/</span><span class="ruby-identifier">project</span><span class="ruby-operator">/</span><span class="ruby-identifier">app</span><span class="ruby-operator">/</span><span class="ruby-identifier">controllers</span><span class="ruby-operator">/</span><span class="ruby-identifier">posts_controller</span>.<span class="ruby-identifier">rb</span>
   <span class="ruby-value">1</span>  <span class="ruby-keyword">class</span> <span class="ruby-constant">PostsController</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ApplicationController</span>
   <span class="ruby-value">2</span>    <span class="ruby-comment"># GET /posts</span>
   <span class="ruby-value">3</span>    <span class="ruby-comment"># GET /posts.json</span>
   <span class="ruby-value">4</span>    <span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
   <span class="ruby-value">5</span>      <span class="ruby-identifier">debugger</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>      <span class="ruby-ivar">@posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">all</span>
   <span class="ruby-value">7</span>
   <span class="ruby-value">8</span>      <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
   <span class="ruby-value">9</span>        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">html</span> <span class="ruby-comment"># index.html.erb</span>
   <span class="ruby-value">10</span>        <span class="ruby-identifier">format</span>.<span class="ruby-identifier">json</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">json</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@posts</span> }
</pre>

<h3 id="label-The+Context">The Context<span><a href="#label-The+Context">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>When you start debugging your application, you will be placed in different
contexts as you go through the different parts of the stack.</p>

<p>The debugger creates a context when a stopping point or an event is
reached. The context has information about the suspended program which
enables a debugger to inspect the frame stack, evaluate variables from the
perspective of the debugged program, and contains information about the
place where the debugged program is stopped.</p>

<p>At any time you can call the <code>backtrace</code> command (or its alias
<code>where</code>) to print the backtrace of the application. This can be
very helpful to know how you got where you are. If you ever wondered about
how you got somewhere in your code, then <code>backtrace</code> will supply
the answer.</p>

<pre>(rdb:5) where
    #0 PostsController.index
       at line /PathTo/project/app/controllers/posts_controller.rb:6
    #1 Kernel.send
       at line /PathTo/project/vendor/rails/actionpack/lib/action_controller/base.rb:1175
    #2 ActionController::Base.perform_action_without_filters
       at line /PathTo/project/vendor/rails/actionpack/lib/action_controller/base.rb:1175
    #3 ActionController::Filters::InstanceMethods.call_filters(chain#ActionController::Fil...,...)
       at line /PathTo/project/vendor/rails/actionpack/lib/action_controller/filters.rb:617
...</pre>

<p>You move anywhere you want in this trace (thus changing the context) by
using the <code>frame <em>n</em></code> command, where <em>n</em> is the
specified frame number.</p>

<pre>(rdb:5) frame 2
#2 ActionController::Base.perform_action_without_filters
       at line /PathTo/project/vendor/rails/actionpack/lib/action_controller/base.rb:1175</pre>

<p>The available variables are the same as if you were running the code line
by line. After all, that&#39;s what debugging is.</p>

<p>Moving up and down the stack frame: You can use <code>up [n]</code>
(<code>u</code> for abbreviated) and <code>down [n]</code> commands in
order to change the context <em>n</em> frames up or down the stack
respectively. <em>n</em> defaults to one. Up in this case is towards
higher-numbered stack frames, and down is towards lower-numbered stack
frames.</p>

<h3 id="label-Threads">Threads<span><a href="#label-Threads">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The debugger can list, stop, resume and switch between running threads by
using the command <code>thread</code> (or the abbreviated <code>th</code>).
This command has a handful of options:</p>
<ul><li>
<p><code>thread</code> shows the current thread.</p>
</li><li>
<p><code>thread list</code> is used to list all threads and their statuses.
The plus + character and the number indicates the current thread of
execution.</p>
</li><li>
<p><code>thread stop <em>n</em></code> stop thread <em>n</em>.</p>
</li><li>
<p><code>thread resume <em>n</em></code> resumes thread <em>n</em>.</p>
</li><li>
<p><code>thread switch <em>n</em></code> switches the current thread context
to <em>n</em>.</p>
</li></ul>

<p>This command is very helpful, among other occasions, when you are debugging
concurrent threads and need to verify that there are no race conditions in
your code.</p>

<h3 id="label-Inspecting+Variables">Inspecting Variables<span><a href="#label-Inspecting+Variables">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Any expression can be evaluated in the current context. To evaluate an
expression, just type it!</p>

<p>This example shows how you can print the instance_variables defined within
the current context:</p>

<pre>@posts = Post.all
(rdb:11) instance_variables
[&quot;@_response&quot;, &quot;@action_name&quot;, &quot;@url&quot;, &quot;@_session&quot;, &quot;@_cookies&quot;, &quot;@performed_render&quot;, &quot;@_flash&quot;, &quot;@template&quot;, &quot;@_params&quot;, &quot;@before_filter_chain_aborted&quot;, &quot;@request_origin&quot;, &quot;@_headers&quot;, &quot;@performed_redirect&quot;, &quot;@_request&quot;]</pre>

<p>As you may have figured out, all of the variables that you can access from
a controller are displayed. This list is dynamically updated as you execute
code. For example, run the next line using <code>next</code> (you&#39;ll
learn more about this command later in this guide).</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">11</span>) <span class="ruby-keyword">next</span>
<span class="ruby-constant">Processing</span> <span class="ruby-constant">PostsController</span><span class="ruby-comment">#index (for 127.0.0.1 at 2008-09-04 19:51:34) [GET]</span>
  <span class="ruby-constant">Session</span> <span class="ruby-constant">ID</span><span class="ruby-operator">:</span> <span class="ruby-constant">BAh7BiIKZmxhc2hJQzonQWN0aW9uQ29udHJvbGxlcjo6Rmxhc2g6OkZsYXNoSGFzaHsABjoKQHVzZWR7AA</span><span class="ruby-operator">==</span><span class="ruby-operator">-</span><span class="ruby-operator">-</span><span class="ruby-identifier">b16e91b992453a8cc201694d660147bba8b0fd0e</span>
  <span class="ruby-constant">Parameters</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;action&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;index&quot;</span>, <span class="ruby-string">&quot;controller&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;posts&quot;</span>}
<span class="ruby-regexp">/PathToProject/</span><span class="ruby-identifier">posts_controller</span>.<span class="ruby-identifier">rb</span>:<span class="ruby-value">8</span>
<span class="ruby-identifier">respond_to</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
</pre>

<p>And then ask again for the instance_variables:</p>

<pre>(rdb:11) instance_variables.include? &quot;@posts&quot;
true</pre>

<p>Now <code>@posts</code> is included in the instance variables, because the
line defining it was executed.</p>

<p>TIP: You can also step into <strong>irb</strong> mode with the command
<code>irb</code> (of course!). This way an irb session will be started
within the context you invoked it. But be warned: this is an experimental
feature.</p>

<p>The <code>var</code> method is the most convenient way to show variables
and their values:</p>

<pre>var
(rdb:1) v[ar] const &lt;object&gt;            show constants of object
(rdb:1) v[ar] g[lobal]                  show global variables
(rdb:1) v[ar] i[nstance] &lt;object&gt;       show instance variables of object
(rdb:1) v[ar] l[ocal]                   show local variables</pre>

<p>This is a great way to inspect the values of the current context variables.
For example:</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">9</span>) <span class="ruby-identifier">var</span> <span class="ruby-identifier">local</span>
  <span class="ruby-identifier">__dbg_verbose_save</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>
</pre>

<p>You can also inspect for an object method this way:</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">9</span>) <span class="ruby-identifier">var</span> <span class="ruby-identifier">instance</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">new</span>
<span class="ruby-ivar">@attributes</span> = {<span class="ruby-string">&quot;updated_at&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>, <span class="ruby-string">&quot;body&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>, <span class="ruby-string">&quot;title&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>, <span class="ruby-string">&quot;published&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-keyword">nil</span>, <span class="ruby-string">&quot;created_at&quot;</span><span class="ruby-operator">...</span>
<span class="ruby-ivar">@attributes_cache</span> = {}
<span class="ruby-ivar">@new_record</span> = <span class="ruby-keyword">true</span>
</pre>

<p>TIP: The commands <code>p</code> (print) and <code>pp</code> (pretty print)
can be used to evaluate Ruby expressions and display the value of variables
to the console.</p>

<p>You can use also <code>display</code> to start watching variables. This is
a good way of tracking the values of a variable while the execution goes
on.</p>

<pre>(rdb:1) display @recent_comments
1: @recent_comments =</pre>

<p>The variables inside the displaying list will be printed with their values
after you move in the stack. To stop displaying a variable use
<code>undisplay <em>n</em></code> where <em>n</em> is the variable number
(1 in the last example).</p>

<h3 id="label-Step+by+Step">Step by Step<span><a href="#label-Step+by+Step">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Now you should know where you are in the running trace and be able to print
the available variables. But lets continue and move on with the application
execution.</p>

<p>Use <code>step</code> (abbreviated <code>s</code>) to continue running your
program until the next logical stopping point and return control to the
debugger.</p>

<p>TIP: You can also use <code>step+ n</code> and <code>step- n</code> to move
forward or backward <code>n</code> steps respectively.</p>

<p>You may also use <code>next</code> which is similar to step, but function
or method calls that appear within the line of code are executed without
stopping. As with step, you may use plus sign to move <em>n</em> steps.</p>

<p>The difference between <code>next</code> and <code>step</code> is that
<code>step</code> stops at the next line of code executed, doing just a
single step, while <code>next</code> moves to the next line without
descending inside methods.</p>

<p>For example, consider this block of code with an included
<code>debugger</code> statement:</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Author</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_one</span> :<span class="ruby-identifier">editorial</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">comments</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">find_recent_comments</span>(<span class="ruby-identifier">limit</span> = <span class="ruby-value">10</span>)
    <span class="ruby-identifier">debugger</span>
    <span class="ruby-ivar">@recent_comments</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;created_at &gt; ?&quot;</span>, <span class="ruby-value">1</span>.<span class="ruby-identifier">week</span>.<span class="ruby-identifier">ago</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">limit</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>TIP: You can use the debugger while using <code>rails console</code>. Just
remember to <code>require &quot;debugger&quot;</code> before calling the
<code>debugger</code> method.</p>

<pre class="ruby">$ <span class="ruby-identifier">rails</span> <span class="ruby-identifier">console</span>
<span class="ruby-constant">Loading</span> <span class="ruby-identifier">development</span> <span class="ruby-identifier">environment</span> (<span class="ruby-constant">Rails</span> <span class="ruby-value">4.1</span><span class="ruby-value">.4</span>)
<span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">require</span> <span class="ruby-string">&quot;debugger&quot;</span>
=<span class="ruby-operator">&gt;</span> []
<span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">first</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-comment">#&lt;Author id: 1, first_name: &quot;Bob&quot;, last_name: &quot;Smith&quot;, created_at: &quot;2008-07-31 12:46:10&quot;, updated_at: &quot;2008-07-31 12:46:10&quot;&gt;</span>
<span class="ruby-operator">&gt;&gt;</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">find_recent_comments</span>
<span class="ruby-regexp">/PathTo/</span><span class="ruby-identifier">project</span><span class="ruby-operator">/</span><span class="ruby-identifier">app</span><span class="ruby-operator">/</span><span class="ruby-identifier">models</span><span class="ruby-operator">/</span><span class="ruby-identifier">author</span>.<span class="ruby-identifier">rb</span>:<span class="ruby-value">11</span>
)
</pre>

<p>With the code stopped, take a look around:</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">1</span>) <span class="ruby-identifier">list</span>
[<span class="ruby-value">2</span>, <span class="ruby-value">9</span>] <span class="ruby-keyword">in</span> <span class="ruby-regexp">/PathTo/</span><span class="ruby-identifier">project</span><span class="ruby-operator">/</span><span class="ruby-identifier">app</span><span class="ruby-operator">/</span><span class="ruby-identifier">models</span><span class="ruby-operator">/</span><span class="ruby-identifier">author</span>.<span class="ruby-identifier">rb</span>
   <span class="ruby-value">2</span>    <span class="ruby-identifier">has_one</span> <span class="ruby-operator">:</span><span class="ruby-identifier">editorial</span>
   <span class="ruby-value">3</span>    <span class="ruby-identifier">has_many</span> <span class="ruby-operator">:</span><span class="ruby-identifier">comments</span>
   <span class="ruby-value">4</span>
   <span class="ruby-value">5</span>    <span class="ruby-keyword">def</span> <span class="ruby-identifier">find_recent_comments</span>(<span class="ruby-identifier">limit</span> = <span class="ruby-value">10</span>)
   <span class="ruby-value">6</span>      <span class="ruby-identifier">debugger</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-value">7</span>      <span class="ruby-ivar">@recent_comments</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;created_at &gt; ?&quot;</span>, <span class="ruby-value">1</span>.<span class="ruby-identifier">week</span>.<span class="ruby-identifier">ago</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-identifier">limit</span>)
   <span class="ruby-value">8</span>    <span class="ruby-keyword">end</span>
   <span class="ruby-value">9</span>  <span class="ruby-keyword">end</span>
</pre>

<p>You are at the end of the line, but was this line executed? You can
inspect the instance variables.</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">1</span>) <span class="ruby-identifier">var</span> <span class="ruby-identifier">instance</span>
<span class="ruby-ivar">@attributes</span> = {<span class="ruby-string">&quot;updated_at&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;2008-07-31 12:46:10&quot;</span>, <span class="ruby-string">&quot;id&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;1&quot;</span>, <span class="ruby-string">&quot;first_name&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;Bob&quot;</span>, <span class="ruby-string">&quot;las...
@attributes_cache = {}
</span></pre>

<p><code>@recent_comments</code> hasn&#39;t been defined yet, so it&#39;s
clear that this line hasn&#39;t been executed yet. Use the
<code>next</code> command to move on in the code:</p>

<pre class="ruby">(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">1</span>) <span class="ruby-keyword">next</span>
<span class="ruby-regexp">/PathTo/</span><span class="ruby-identifier">project</span><span class="ruby-operator">/</span><span class="ruby-identifier">app</span><span class="ruby-operator">/</span><span class="ruby-identifier">models</span><span class="ruby-operator">/</span><span class="ruby-identifier">author</span>.<span class="ruby-identifier">rb</span>:<span class="ruby-value">12</span>
<span class="ruby-ivar">@recent_comments</span>
(<span class="ruby-identifier">rdb</span>:<span class="ruby-value">1</span>) <span class="ruby-identifier">var</span> <span class="ruby-identifier">instance</span>
<span class="ruby-ivar">@attributes</span> = {<span class="ruby-string">&quot;updated_at&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;2008-07-31 12:46:10&quot;</span>, <span class="ruby-string">&quot;id&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;1&quot;</span>, <span class="ruby-string">&quot;first_name&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;Bob&quot;</span>, <span class="ruby-string">&quot;las...
@attributes_cache = {}
@comments = []
@recent_comments = []
</span></pre>

<p>Now you can see that the <code>@comments</code> relationship was loaded and
@recent_comments defined because the line was executed.</p>

<p>If you want to go deeper into the stack trace you can move single
<code>steps</code>, through your calling methods and into Rails code. This
is one of the best ways to find bugs in your code, or perhaps in Ruby or
Rails.</p>

<h3 id="label-Breakpoints">Breakpoints<span><a href="#label-Breakpoints">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>A breakpoint makes your application stop whenever a certain point in the
program is reached. The debugger shell is invoked in that line.</p>

<p>You can add breakpoints dynamically with the command <code>break</code> (or
just <code>b</code>). There are 3 possible ways of adding breakpoints
manually:</p>
<ul><li>
<p><code>break line</code>: set breakpoint in the <em>line</em> in the current
source file.</p>
</li><li>
<p><code>break file:line [if expression]</code>: set breakpoint in the
<em>line</em> number inside the <em>file</em>. If an <em>expression</em> is
given it must evaluated to <em>true</em> to fire up the debugger.</p>
</li><li>
<p><code>break class(.|\#)method [if expression]</code>: set breakpoint in
<em>method</em> (. and # for class and instance method respectively)
defined in <em>class</em>. The <em>expression</em> works the same way as
with file:line.</p>
</li></ul>

<pre>(rdb:5) break 10
Breakpoint 1 file /PathTo/project/vendor/rails/actionpack/lib/action_controller/filters.rb, line 10</pre>

<p>Use <code>info breakpoints <em>n</em></code> or <code>info break
<em>n</em></code> to list breakpoints. If you supply a number, it lists
that breakpoint. Otherwise it lists all breakpoints.</p>

<pre>(rdb:5) info breakpoints
Num Enb What
  1 y   at filters.rb:10</pre>

<p>To delete breakpoints: use the command <code>delete <em>n</em></code> to
remove the breakpoint number <em>n</em>. If no number is specified, it
deletes all breakpoints that are currently active..</p>

<pre>(rdb:5) delete 1
(rdb:5) info breakpoints
No breakpoints.</pre>

<p>You can also enable or disable breakpoints:</p>
<ul><li>
<p><code>enable breakpoints</code>: allow a list <em>breakpoints</em> or all
of them if no list is specified, to stop your program. This is the default
state when you create a breakpoint.</p>
</li><li>
<p><code>disable breakpoints</code>: the <em>breakpoints</em> will have no
effect on your program.</p>
</li></ul>

<h3 id="label-Catching+Exceptions">Catching Exceptions<span><a href="#label-Catching+Exceptions">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The command <code>catch exception-name</code> (or just <code>cat
exception-name</code>) can be used to intercept an exception of type
<em>exception-name</em> when there would otherwise be is no handler for it.</p>

<p>To list all active catchpoints use <code>catch</code>.</p>

<h3 id="label-Resuming+Execution">Resuming Execution<span><a href="#label-Resuming+Execution">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>There are two ways to resume execution of an application that is stopped in
the debugger:</p>
<ul><li>
<p><code>continue</code> [line-specification] (or <code>c</code>): resume
program execution, at the address where your script last stopped; any
breakpoints set at that address are bypassed. The optional argument
line-specification allows you to specify a line number to set a one-time
breakpoint which is deleted when that breakpoint is reached.</p>
</li><li>
<p><code>finish</code> [frame-number] (or <code>fin</code>): execute until the
selected stack frame returns. If no frame number is given, the application
will run until the currently selected frame returns. The currently selected
frame starts out the most-recent frame or 0 if no frame positioning (e.g
up, down or frame) has been performed. If a frame number is given it will
run until the specified frame returns.</p>
</li></ul>

<h3 id="label-Editing">Editing<span><a href="#label-Editing">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>Two commands allow you to open code from the debugger into an editor:</p>
<ul><li>
<p><code>edit [file:line]</code>: edit <em>file</em> using the editor
specified by the EDITOR environment variable. A specific <em>line</em> can
also be given.</p>
</li><li>
<p><code>tmate <em>n</em></code> (abbreviated <code>tm</code>): open the
current file in TextMate. It uses n-th frame if <em>n</em> is specified.</p>
</li></ul>

<h3 id="label-Quitting">Quitting<span><a href="#label-Quitting">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>To exit the debugger, use the <code>quit</code> command (abbreviated
<code>q</code>), or its alias <code>exit</code>.</p>

<p>A simple quit tries to terminate all threads in effect. Therefore your
server will be stopped and you will have to start it again.</p>

<h3 id="label-Settings">Settings<span><a href="#label-Settings">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>The <code>debugger</code> gem can automatically show the code you&#39;re
stepping through and reload it when you change it in an editor. Here are a
few of the available options:</p>
<ul><li>
<p><code>set reload</code>: Reload source code when changed.</p>
</li><li>
<p><code>set autolist</code>: Execute <code>list</code> command on every
breakpoint.</p>
</li><li>
<p><code>set listsize <em>n</em></code>: Set number of source lines to list by
default to <em>n</em>.</p>
</li><li>
<p><code>set forcestep</code>: Make sure the <code>next</code> and
<code>step</code> commands always move to a new line</p>
</li></ul>

<p>You can see the full list by using <code>help set</code>. Use <code>help
set <em>subcommand</em></code> to learn about a particular <code>set</code>
command.</p>

<p>TIP: You can save these settings in an <code>.rdebugrc</code> file in your
home directory. The debugger reads these global settings when it starts.</p>

<p>Here&#39;s a good start for an <code>.rdebugrc</code>:</p>

<pre>set autolist
set forcestep
set listsize 25</pre>

<h2 id="label-Debugging+Memory+Leaks">Debugging Memory Leaks<span><a href="#label-Debugging+Memory+Leaks">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>A Ruby application (on Rails or not), can leak memory - either in the Ruby
code or at the C code level.</p>

<p>In this section, you will learn how to find and fix such leaks by using
tool such as Valgrind.</p>

<h3 id="label-Valgrind">Valgrind<span><a href="#label-Valgrind">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p><a href="http://valgrind.org/">Valgrind</a> is a Linux-only application for
detecting C-based memory leaks and race conditions.</p>

<p>There are Valgrind tools that can automatically detect many memory
management and threading bugs, and profile your programs in detail. For
example, if a C extension in the interpreter calls <code>malloc()</code>
but doesn&#39;t properly call <code>free()</code>, this memory won&#39;t be
available until the app terminates.</p>

<p>For further information on how to install Valgrind and use with Ruby, refer
to <a
href="http://blog.evanweaver.com/articles/2008/02/05/valgrind-and-ruby/">Valgrind
and Ruby</a> by Evan Weaver.</p>

<h2 id="label-Plugins+for+Debugging">Plugins for Debugging<span><a href="#label-Plugins+for+Debugging">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>There are some Rails plugins to help you to find errors and debug your
application. Here is a list of useful plugins for debugging:</p>
<ul><li>
<p><a href="https://github.com/josevalim/rails-footnotes">Footnotes</a> Every
Rails page has footnotes that give request information and link back to
your source via TextMate.</p>
</li><li>
<p><a href="https://github.com/ntalbott/query_trace/tree/master">Query
Trace</a> Adds query origin tracing to your logs.</p>
</li><li>
<p><a href="https://github.com/nesquena/query_reviewer">Query Reviewer</a>
This rails plugin not only runs EXPLAIN before each of your select
queries in development, but provides a small DIV in the rendered output of
each page with the summary of warnings for each query that it analyzed.</p>
</li><li>
<p><a
href="https://github.com/smartinez87/exception_notification/tree/master">Exception
Notifier</a> Provides a mailer object and a default set of templates for
sending email notifications when errors occur in a Rails application.</p>
</li><li>
<p><a href="https://github.com/charliesome/better_errors">Better Errors</a>
Replaces the standard Rails error page with a new one containing more
contextual information, like source code and variable inspection.</p>
</li><li>
<p><a href="https://github.com/dejan/rails_panel">RailsPanel</a> Chrome
extension for Rails development that will end your tailing of
development.log. Have all information about your Rails app requests in the
browser - in the Developer Tools panel. Provides insight to
db/rendering/total times, parameter list, rendered views and more.</p>
</li></ul>

<h2 id="label-References">References<span><a href="#label-References">&para;</a> <a href="#documentation">&uarr;</a></span></h2>
<ul><li>
<p><a
href="http://bashdb.sourceforge.net/ruby-debug/home-page.html">ruby-debug
Homepage</a></p>
</li><li>
<p><a href="https://github.com/cldwalker/debugger">debugger Homepage</a></p>
</li><li>
<p><a href="http://www.sitepoint.com/debug-rails-app-ruby-debug/">Article:
Debugging a Rails application with ruby-debug</a></p>
</li><li>
<p><a href="http://railscasts.com/episodes/54-debugging-ruby-revised">Ryan
Bates debugging ruby (revised) screencast</a></p>
</li><li>
<p><a href="http://railscasts.com/episodes/24-the-stack-trace">Ryan Bates
stack trace screencast</a></p>
</li><li>
<p><a href="http://railscasts.com/episodes/56-the-logger">Ryan Bates logger
screencast</a></p>
</li><li>
<p><a href="http://bashdb.sourceforge.net/ruby-debug.html">Debugging with
ruby-debug</a></p>
</li></ul>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

